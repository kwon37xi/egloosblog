<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../../css/result.css">

        <title>Java 리소스(혹은 클래스)의 위치 찾기.</title>
    </head>
    <body>
        <section id="wrap">
            <header>
                <h1 class="logo-title">
                    <span class="main"><img src="../../images/logo_egloos.png" width="105" height="34" alt="이글루스"></span>
                </h1>
                <div class="user-info">
                    <strong class="name">권남</strong> 님 (<strong class="name">kwon37xi</strong>)
                </div>
            </header>
            <main>
                <article class="post-wrap">
                    <!-- 게시물 정보 : 날짜 -->
                    <div class="post-info">
                        <span class="time">2006-11-29 09:58:14</span>
                    </div>
                    <!-- 게시물 제목 -->
                    <h2 class="post-title">Java 리소스(혹은 클래스)의 위치 찾기.</h2>
                    <!-- 게시물 본문 -->
                    <div class="post-body">
                        <div class="content">2004년 10월에 올린 글 입니다.<br><hr /><br>며칠전에 <a title="" href="http://kwon37xi.egloos.com/2845339">여기</a>에서 약속했던 사항을 이제야 지킨다.<br><br>이것은 자바 클래스 패스 경로 내에 있는 자바 클래스나 리소스(일반 파일)이 정확히 어디 있는지 찾아주는 것이다.<br><br>클래스패스가 복잡하게 얽혀 있는 경우에, 대체 어디에 위치한 클래스나 리소스가 실제로 JVM에 의해 사용되는지 모르게 되어버리는 경우가 있다. 이럴 경우에 사용하면 즉빵으로 찾아낸다.<br><br><a title="" href="http://www.javaservice.net/~java/bbs/read.cgi?m=devtip&b=javatip&c=r_p&n=1097829349&p=1&s=t#1097829349">여기</a>서 참조했다.<br><br><div class="h2">설명</div><br>실질적인 역할을 하는 메소드는 <strong>public String getResourceURL(String resource, boolean isClass)</strong> 하나 뿐이다.<br><br>웹 어플리케이션에서 알아내려면 이 자바 프로그램을 따로 사용하면 안되고, JSP페이지에서 위 메소드를 호출하면 된다.<br><br>자바 클래스의 경우에는 package.path.classname과 같은 형태로 <strong>끝에 ".class"를 붙이지 말아야 한다.</strong><br>일반 파일 리소스의 경우에는 "/package/path/filename.ext"와 같이 <strong>패키지 경로를 /로 구분해서 적어줘야 한다.</strong><br><br>*.jar 파일 내부에 위치한 클래스나 리소스도 jar 파일의 위치와 함께 정확하게 알려준다.<br><br>자세한 사항은 main() 메소드를 보면 사용법을 알 수 있을 것이다.<br><br><div class="h2">소스코드</div><br><blockquote class="src" style="height: 200px;">package&nbsp;test;<br><br>/**<br>&nbsp;*&nbsp;&lt;p&gt;<br>&nbsp;*&nbsp;Java&nbsp;Class&nbsp;혹은&nbsp;리소스(클래스패스&nbsp;내에&nbsp;있는&nbsp;파일)의&nbsp;위치를&nbsp;정확히&nbsp;알려준다.<br>&nbsp;*&nbsp;&lt;/p&gt;<br>&nbsp;*&nbsp;<br>&nbsp;*&nbsp;@author&nbsp;Son&nbsp;KwonNam(kwon37xi_A@T_gmail.com)<br>&nbsp;*/<br>public&nbsp;class&nbsp;ResourceLocation&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;패키지명을&nbsp;포함한&nbsp;클래스&nbsp;풀&nbsp;네임을&nbsp;리소스&nbsp;경로(/package/classname.class)로&nbsp;바꿔준다.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;classFullName<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;클래스&nbsp;풀&nbsp;네임(package.classname)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;리소스&nbsp;경로&nbsp;(/package/classname.class)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;classFullNameToResourcePath(String&nbsp;classFullName)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;resourcePath&nbsp;=&nbsp;classFullName.replace('.',&nbsp;'/').trim();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resourcePath&nbsp;=&nbsp;"/"&nbsp;+&nbsp;resourcePath&nbsp;+&nbsp;".class";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;resourcePath;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;클래스&nbsp;풀&nbsp;네임을&nbsp;받아서&nbsp;실제&nbsp;파일이&nbsp;위치한&nbsp;URL을&nbsp;리턴한다.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;classFullName<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;클래스의&nbsp;풀&nbsp;네임<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;클래스&nbsp;파일의&nbsp;URL<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getResourceURL(String&nbsp;classFullName)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;getResourceURL(classFullName,&nbsp;true);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;/**<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;클래스&nbsp;혹은&nbsp;리소스의&nbsp;이름을&nbsp;받아서&nbsp;실제&nbsp;파일이&nbsp;위치한&nbsp;URL을&nbsp;리턴한다.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;resource<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;리소스&nbsp;이름<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;isClass<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;클래스인지&nbsp;여부<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;리소스의&nbsp;URL<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getResourceURL(String&nbsp;resource,&nbsp;boolean&nbsp;isClass)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;refinedResource&nbsp;=&nbsp;null;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;"/dir1/dir2/resource.ext"&nbsp;형태로&nbsp;바꾼다.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isClass)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refinedResource&nbsp;=&nbsp;classFullNameToResourcePath(resource);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(!resource.startsWith("/"))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refinedResource&nbsp;=&nbsp;"/"&nbsp;+&nbsp;resource.trim();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refinedResource&nbsp;=&nbsp;resource.trim();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("검색할&nbsp;리소스&nbsp;:&nbsp;"&nbsp;+&nbsp;refinedResource);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java.net.URL&nbsp;resourceUrl&nbsp;=&nbsp;ResourceLocation.class<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.getResource(refinedResource);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(resourceUrl&nbsp;==&nbsp;null)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;resourceUrl.getFile();<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(args.length&nbsp;==&nbsp;0)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;usage();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.exit(-1);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;startArg&nbsp;=&nbsp;0;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;isClass&nbsp;=&nbsp;true;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(args[0].equals("-r"))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isClass&nbsp;=&nbsp;false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startArg&nbsp;=&nbsp;1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ResourceLocation&nbsp;rl&nbsp;=&nbsp;new&nbsp;ResourceLocation();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;startArg;&nbsp;i&nbsp;&lt;&nbsp;args.length;&nbsp;i++)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;resourceUrl&nbsp;=&nbsp;rl.getResourceURL(args[i],&nbsp;isClass);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(resourceUrl&nbsp;==&nbsp;null)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(args[i]&nbsp;+&nbsp;"&nbsp;not&nbsp;found");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("reqName&nbsp;:&nbsp;"&nbsp;+&nbsp;resourceUrl);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;void&nbsp;usage()&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.println("Usage&nbsp;:&nbsp;java&nbsp;ResourceLocation&nbsp;package.classname&nbsp;[package.classname&nbsp;....]\n"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;"혹은\n"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;java&nbsp;ResourceLocation&nbsp;-r&nbsp;/resource/path/resource.name&nbsp;[/resource/path/resource.name]");<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></blockquote><br><br><div class="h2">출력예</div><br><blockquote class="src">$ java  -cp .:../lib/props.jar test.ResourceLocation -r "/java/net/URL.class" \<br>> /java/util/Date.class test/ResourceLocation.class test/aaa.properties<br>검색할 리소스 : /java/net/URL.class<br>reqName : file:/usr/java/j2sdk1.4.2_04/jre/lib/rt.jar!/java/net/URL.class<br>검색할 리소스 : /java/util/Date.class<br>reqName : file:/usr/java/j2sdk1.4.2_04/jre/lib/rt.jar!/java/util/Date.class<br>검색할 리소스 : /test/ResourceLocation.class<br>reqName : /home/kwon37xi/WorkSpace3/Test/bin/test/ResourceLocation.class<br>검색할 리소스 : /test/aaa.properties<br>reqName : /home/kwon37xi/WorkSpace3/Test/bin/test/aaa.properties<br></blockquote></div>
                        <div class="post-footer">
                            <button class="btn" onclick="button_click();">목록</button>
                        </div>
                    </div>
                </article>
            </main>
        </section>

        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>

        <script>
            function button_click() {
                if(history.length > 1) {
                    history.back();
                } else {
                    document.location.href = "../../블로그포스트목록.html";
                }
            }
        </script>
    </body>
</html>
